"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3218],{93218:function(t,e,n){n.d(e,{c:function(){return J}});var a=n(92228),i=n(52322),r=n(30382),o=n.n(r),l=n(2784),c=n(45103),s=n(31619),u=n(89254),d=n(47842),f=n(70865),g=n(72779),m=n.n(g),x=n(19453),p=n(91842),h={id:"common_ariaLabels_gotoTitle",defaultMessage:"View title page for {titleName}"},v={id:"common_ariaLabels_ratingButtonRated",defaultMessage:"Your rating: {rating}"},T={id:"common_ariaLabels_ratingButtonUnrated",defaultMessage:"Rate {titleName}"},b={id:"common_ratingPrompt_header",defaultMessage:"Rate this"},y={id:"common_ratingPrompt_rate",defaultMessage:"Rate"},R={id:"common_ratingPrompt_removeRating",defaultMessage:"Remove rating"},C={id:"common_ratingPrompt_ariaLabelPrefix",defaultMessage:"Rating"},_={id:"common_buttons_trailer",defaultMessage:"Trailer"};function P(){var t=(0,a.Z)(["\n    display: flex;\n    width: 100%;\n    align-items: center;\n    padding: "," 0;\n    margin-bottom: -1rem;\n\n    &.justify--space-between {\n        justify-content: space-between;\n    }\n\n    &.justify--space-around {\n        justify-content: space-around;\n    }\n\n    &.justify--left {\n        justify-content: flex-start;\n    }\n\n    &.justify--right {\n        justify-content: flex-end;\n    }\n\n    &.both-card-actions {\n        > .card-action-button {\n            margin-left: -0.25rem;\n            padding-right: 0.5rem;\n            padding-left: 0.5rem;\n        }\n        > .card-action-icon {\n            margin-right: -0.25rem;\n        }\n    }\n\n    > .card-action-button {\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n"]);return P=function(){return t},t}var N;!function(t){t.SPACE_BETWEEN="space-between",t.SPACE_AROUND="space-around",t.RIGHT="right",t.LEFT="left"}(N||(N={}));var j=function(t){var e=t.title.latestTrailerId,n=t.refPrefix,a=t.refSuffix,r=t.iconButtons,o=(0,s.N)(_),l=(0,s.N)(_),u=[];if(e){var g="/video/".concat(e,"/?ref_=").concat(n,"tr_vp").concat(a);u.push({preIcon:"play-arrow",onColor:"textPrimary",href:g,ariaLabel:o,children:(0,i.jsx)("div",{className:"trailers-button-text","data-testid":"trailer-button",children:l})})}var x=N.SPACE_AROUND;if(1===(null===r||void 0===r?void 0:r.length)&&u.length<1&&(x=N.RIGHT),!(null===r||void 0===r?void 0:r.length)&&!u.length)return null;var p=m()(["justify--".concat(x)],(0,d.Z)({},"both-card-actions",(null===r||void 0===r?void 0:r.length)&&u.length));return(0,i.jsxs)(w,{className:p,children:[u.map((function(t,e){return(0,i.jsx)(c.TextButton,(0,f.Z)({className:m()("card-action-button",t.className)},t),e)})),null===r||void 0===r?void 0:r.map((function(t,e){return(0,i.jsx)(c.IconButton,(0,f.Z)({className:m()("card-action-icon",t.className)},t),e)}))]})},w=x.default.div.withConfig({componentId:"sc-3a643f09-0"})(P(),p.spacing.xs),Z=n(96670),I=n(43814),S=n(58267);function B(){var t=(0,a.Z)(["\n    max-height: ",";\n    max-width: ",";\n    vertical-align: middle;\n"]);return B=function(){return t},t}var k=function(t){var e=t.title.id,n=t.alternateButton,a=t.refPrefix,r=t.refSuffix,o=(0,I.Vu)(),l=o.type,s=o.subType;if(n){var u=(0,Z.Z)((0,f.Z)({},n.props),{width:"full-width"});return(0,i.jsx)(c.SecondaryButton,(0,Z.Z)((0,f.Z)({},u),{children:n.fetching?(0,i.jsx)(L,{className:"alternate-button-loader",type:"circle"}):n.text}))}return(0,i.jsx)(S.Z,{titleId:e,watchlistMetricsContext:{pageType:l,subPageType:s,refTag:"".concat(a,"wl_btn").concat(r)}},e)},L=(0,x.default)(c.Loader).withConfig({componentId:"sc-4c809ea-0"})(B(),p.spacing.xl,p.spacing.xl),M=n(23104),U=function(t){var e=t.title,n=e.id,a=e.titleText,r=e.titleTypeId,o=e.image,l=o.url,u=o.height,d=o.width,f=t.onClick,g=t.refPrefix,m=t.refSuffix,x="/title/".concat(n,"/?ref_=").concat(g,"tt_i").concat(m),p=(0,I.Vu)(),v=p.type,T=p.subType,b=(0,s.N)(h,{titleName:a});return(0,i.jsxs)(c.PosterCard.Poster,{href:x,ariaLabel:b,onClick:f,children:[(0,i.jsx)(M.Z,{titleId:n,watchlistMetricsContext:{pageType:v,subPageType:T,refTag:"".concat(g,"wl_rbn").concat(m)},onPoster:!0,className:"poster-card-watchlist-ribbon"},n),(0,i.jsx)(c.Poster.Image,{imageModel:l&&u&&d?{url:l,maxHeight:u,maxWidth:d,caption:a}:void 0,imageType:r,className:"poster-card-image"})]})},E=n(98788),A=n(45680),W=n(9659),z=n(61436),H=n(92281),O=n(90551),G=n(95460),V=n(26688);function Y(){var t=(0,a.Z)(["\n    min-height: 36px;\n"]);return Y=function(){return t},t}var F=function(t){var e=t.title,n=e.id,a=e.titleText,r=e.ratingsSummary,o=e.canRate,u=t.refPrefix,d=t.refSuffix,f=(0,l.useState)(!1),g=f[0],m=f[1],x=(0,O.n)(),p=(0,c.useRatingsContext)(n),h=p.rating,_=p.updateRating,P=p.deleteRating,N=(0,z.P)(r,"imdb"),j=(0,z.P)(h,"user"),w="".concat(u,"rt").concat(d),Z="".concat(u.replace(/_/g,"-")).concat("urate"),S=(0,I.Vu)(),B=o?function(){(0,G.ar)(S,Z,G.qB.POP_UP),m(!0)}:void 0,k=(0,H.vY)({titleId:n,refTag:w,currentRating:h}),L=k.updateTitleRating,M=k.deleteTitleRating,U=k.tempRateUpdateLogRef,Y=(0,s.N)(v,{rating:j}),F=(0,s.N)(T,{titleName:a}),q=(0,s.N)(b),K=(0,s.N)(y),$=(0,s.N)(R),J=(0,s.N)(C);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D,{formattedImdbRating:N,formattedUserRating:j,onUserRatingClick:B,ariaLabelRated:Y,ariaLabelUnrated:F}),B&&(0,i.jsx)(c.RatingPrompt,{isOpen:g,tconst:n,title:a,headerLabel:q,rateLabel:K,ariaLabelPrefix:J,shouldUseNewRatingFlow:!0,secondaryButtonText:$,secondaryButtonType:W.SecondaryButtonType.RemoveRating,onPrimaryButtonClicked:function(){var t=(0,E.Z)((function(t,e){return(0,A.__generator)(this,(function(n){switch(n.label){case 0:return t?x?(m(!1),_(t,w,(function(){return L(t,e)})),[3,3]):[3,1]:(m(!1),[2]);case 1:return[4,U(t,e)];case 2:n.sent(),(0,V.O)(t,e,w,S),n.label=3;case 3:return[2]}}))}));return function(e,n){return t.apply(this,arguments)}}(),onSecondaryButtonClicked:function(){var t=(0,E.Z)((function(t,e){return(0,A.__generator)(this,(function(t){return m(!1),P(w,(function(){return M(e)})),[2]}))}));return function(e,n){return t.apply(this,arguments)}}(),onCloseClicked:function(){m(!1)}})]})},D=(0,x.default)(c.PosterCard.RatingStarGroup).withConfig({componentId:"sc-395b6291-0"})(Y());function q(){var t=(0,a.Z)(["\n        fragment BaseTitleCard on Title {\n            id\n            titleText {\n                text\n            }\n            titleType {\n                id\n                text\n                canHaveEpisodes\n            }\n            originalTitleText {\n                text\n            }\n            primaryImage {\n                id\n                width\n                height\n                url\n                caption {\n                    plainText\n                }\n            }\n            releaseYear {\n                year\n                endYear\n            }\n            ratingsSummary {\n                aggregateRating\n                voteCount\n            }\n            runtime {\n                seconds\n            }\n            certificate {\n                rating\n            }\n            canRate {\n                isRatable\n            }\n            titleCardGenres: genres {\n                genres(limit: 3) {\n                    text\n                }\n            }\n            canHaveEpisodes\n        }\n    "]);return q=function(){return t},t}function K(){var t=(0,a.Z)(["\n        fragment TitleCardTrailer on Title {\n            latestTrailer {\n                id\n            }\n        }\n    "]);return K=function(){return t},t}function $(){var t=(0,a.Z)(["\n        fragment PersonalizedTitleCardUserRating on Title {\n            userRating @include(if: $includeUserRating) {\n                value\n            }\n        }\n    "]);return $=function(){return t},t}var J=function(t){var e=t.data,n=e.id,a=e.titleText,r=e.originalTitleText,o=e.titleType,l=e.primaryImage,d=e.ratingsSummary,f=e.canRate,g=e.latestTrailer,m=t.refMarker,x=void 0===m?{}:m,p=x.prefix,v=void 0===p?"":p,T=x.suffix,b=void 0===T?"":T,y=v?"".concat(v,"_"):"",R=v?"_".concat(b):"",C=(0,u.K)({originalTitleText:r,titleText:a}),_=(0,s.N)(h,{titleName:C}),P="/title/".concat(n,"/?ref_=").concat(y,"tt_t").concat(R);return C&&o?(0,i.jsxs)(c.PosterCard,{dynamicWidth:!0,className:t.className,children:[(0,i.jsx)(U,{title:{id:n,titleText:C,titleTypeId:o.id,image:{url:null===l||void 0===l?void 0:l.url,height:null===l||void 0===l?void 0:l.height,width:null===l||void 0===l?void 0:l.width}},onClick:t.onClick,refPrefix:y,refSuffix:R}),(0,i.jsx)(F,{title:{id:n,titleText:C,ratingsSummary:null===d||void 0===d?void 0:d.aggregateRating,canRate:null===f||void 0===f?void 0:f.isRatable},refPrefix:y,refSuffix:R}),(0,i.jsx)(c.PosterCard.Title,{href:P,onClick:t.onClick,ariaLabel:_,children:(0,i.jsx)("span",{"data-testid":"title",children:C})}),(0,i.jsxs)(c.PosterCard.Actions,{children:[(0,i.jsx)(k,{title:{id:n},alternateButton:t.alternateButton,refPrefix:y,refSuffix:R}),(0,i.jsx)(j,{title:{latestTrailerId:null===g||void 0===g?void 0:g.id},refPrefix:y,refSuffix:R,iconButtons:t.iconButtons})]})]}):null};J.fragments={baseTitleCard:o()(q()),titleCardTrailer:o()(K()),personalizedTitleCardUserRating:o()($())}},23104:function(t,e,n){var a=n(70865),i=n(96670),r=n(52322),o=(n(2784),n(45103)),l=n(75467);e.Z=function(t){var e=t.titleId,n=t.watchlistMetricsContext,c=t.onPoster,s=t.onImage,u=void 0===s||s,d=t.size,f=t.className;return(0,r.jsx)(l.WatchlistConsumer,{id:e,metricsContext:n,render:function(t){return c?(0,r.jsx)(o.Poster.WatchlistRibbon,(0,i.Z)((0,a.Z)({},t),{className:f,size:d})):(0,r.jsx)(o.WatchlistRibbon,(0,i.Z)((0,a.Z)({},t),{className:f,onImage:u,size:d}))}})}}}]);